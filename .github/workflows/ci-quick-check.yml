name: Frontend Feature CI - Quick Check

on:
  push:
    branches:
      - feat/**
      - hotfix/**

jobs:
  quick-check:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: Checkout source code
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      # 1ì£¼ì°¨ ìƒëµ
      # Lint
      #      - name: Run Lint
      #        run: npm run lint

      # ë¹Œë“œ
      - name: Build
        run: npm run build

      # Feature ë¸Œëœì¹˜ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ì™€ SonarCloud ìƒëµ

      # CI ê²°ê³¼ ì•Œë¦¼ (ì‹¤íŒ¨ ì‹œì—ë§Œ)
      - name: Notify CI result to Discord
        if: failure()
        run: |
          curl -H "Content-Type: application/json" \
               -X POST \
               -d '{
                 "embeds": [{
                   "title": "í”„ë¡ íŠ¸ì—”ë“œ Feature CI ì‹¤íŒ¨ ğŸ’”ğŸ’€",
                   "color": 16711680,
                   "url": "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}",
                   "fields": [
                     {"name": "ê²°ê³¼", "value": "ì‹¤íŒ¨", "inline": true},
                     {"name": "ë¸Œëœì¹˜", "value": "${{ github.ref_name }}", "inline": true},
                     {"name": "ì‘ì„±ì", "value": "${{ github.actor }}", "inline": true},
                     {"name": "ì»¤ë°‹", "value": "`${{ github.sha }}`", "inline": false},
                     {"name": "ì´ë²¤íŠ¸", "value": "Feature ë¸Œëœì¹˜ ë¹Œë“œ", "inline": false},
                     {"name": "ì›Œí¬í”Œë¡œìš°", "value": "[ì‹¤í–‰ ë¡œê·¸ ë³´ê¸°](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})", "inline": false}
                   ]
                 }]
               }' \
               ${{ secrets.DISCORD_WEBHOOK_URL }}
